<div class="row">
    <?= $this->speckCatalogManagerSideNav(); ?>
    <div class="span6" style="1px solid black">
        <h4>All Categories</h4>
        <div class="list-wrap half-pad">
            <div class="child-expand list-items-helper">
                <div class="collapse-all"><i class="icon-arrow-up"></i></div>
                <div class="expand-all"><i class="icon-arrow-down"></i></div>
                <span class="smallcaps">&nbsp;categories</span><br/>
            </div>
            <div class="list-items">
                <?=$this->speckCatalogRenderChildren('category', $categories); ?>
            </div>
            <div class="row list-items-helper">
                <?=$this->speckCatalogAdderHelper()->addNew('category', 'category', array('category_id' => null)); ?>
            </div>
        </div>
    </div>

    <div class="span4">
        <h4>Site Category Tree Preview</h4>
        <select id="site-select">
            <option value=''>-- Choose a Site --</option>
            <? foreach($sites as $site) : ?>
                <option value="<?=$site->getSiteId();?>"><?=$site->getName();?></option>
            <? endforeach; ?>
        </select>
        <div id="option-tree">select a site from the above dropdown</div>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function(){
        $('select#site-select').live('change', function(){
            getSiteTree();
        })
        function getSiteTree(){
            if($('select#site-select').val()){
                $.post('/catalogmanager/category-tree-preview/' + $('select#site-select').val(), null, function(html){
                    $('div#option-tree').html(html);
                })
            } else {
                $('div#option-tree').html('');
            }
        }
    })
</script>
